<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Radiant Guide ‚Äî Diagn√≥stico Metab√≥lico Personalizado</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=DM+Sans:wght@300;400;500;600&display=swap"
    rel="stylesheet">
  <style>
    :root {
      /* Est√©tica Radiant - Tons Premium e Femininos */
      --brand-rose: #C8445A;
      --brand-rose-light: #F2A0AE;
      --brand-rose-dark: #8C2235;
      --brand-gold: #D4AF37;
      --brand-gold-glow: rgba(212, 175, 55, 0.3);

      /* Convers√£o ‚Äî bot√µes de a√ß√£o */
      --cta: #F46A1A;
      --cta-dark: #C4530E;
      --cta-glow: rgba(244, 106, 26, 0.35);

      /* Valida√ß√£o ‚Äî progresso e sele√ß√£o */
      --check: #2ECC71;
      --check-bg: rgba(46, 204, 113, 0.12);

      /* Insight ‚Äî credibilidade */
      --insight-bg: #F9FBFE;
      --insight-border: #D0E1F4;
      --insight-title: #1A5FAD;
      --insight-text: #2C3E6B;

      --cream: #FDF9F6;
      --brown: #4A3329;
      --text: #1F1411;
      --muted: #8E7468;
      --white: #FFFFFF;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--cream);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background:
        radial-gradient(ellipse 70% 50% at 10% 0%, rgba(200, 68, 90, 0.08) 0%, transparent 70%),
        radial-gradient(ellipse 60% 70% at 90% 100%, rgba(212, 175, 55, 0.05) 0%, transparent 60%);
      pointer-events: none;
      z-index: 0;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 0 20px;
      position: relative;
      z-index: 1;
      width: 100%;
      /* Garante que ocupe a largura dispon√≠vel */
    }

    .header {
      text-align: center;
      padding: 24px 20px 0;
      position: relative;
      z-index: 10;
    }

    .brand {
      font-family: 'Playfair Display', serif;
      font-size: 14px;
      letter-spacing: 0.18em;
      color: var(--brand-rose);
      text-transform: uppercase;
      font-weight: 700;
    }

    .progress-wrap {
      padding: 20px 20px 0;
      max-width: 600px;
      margin: 0 auto;
      position: relative;
      z-index: 5;
    }

    .progress-info {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 6px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .progress-bar {
      height: 3px;
      background: rgba(200, 68, 90, 0.1);
      border-radius: 99px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--brand-rose-light), var(--brand-rose));
      border-radius: 99px;
      transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .card {
      background: var(--white);
      border-radius: 28px;
      overflow: hidden;
      margin: 16px 0 32px;
      box-shadow: 0 8px 32px rgba(74, 51, 41, 0.08);
      position: relative;
      animation: cardIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      flex: 1;
      /* Permite que o card cres√ßa para preencher a tela */
      display: flex;
      flex-direction: column;
      z-index: 2;
    }

    @keyframes cardIn {
      from {
        opacity: 0;
        transform: translateY(24px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .card-body {
      padding: 32px 28px;
    }

    /* ‚îÄ‚îÄ IMAGEM DE TOPO (HOOK) ‚îÄ‚îÄ */
    .hook-wrap {
      width: 100%;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #1f1411;
    }

    .hook-hero {
      height: 380px;
    }

    .hook-mid {
      height: 320px;
    }

    .hook-result {
      height: 340px;
    }

    .hook-wrap img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center 20%;
      display: block;
      transition: opacity 0.6s ease;
      opacity: 0;
    }

    .hook-wrap img.loaded {
      opacity: 1;
    }

    .hook-wrap .ov {
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 0%, rgba(31, 20, 17, 0.85) 100%);
      z-index: 1;
    }

    .hook-wrap .ov-text {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 24px 28px;
      color: white;
      z-index: 2;
    }

    .hook-wrap .ov-text .tag {
      display: inline-block;
      background: var(--brand-rose);
      font-size: 10px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      font-weight: 700;
      padding: 4px 10px;
      border-radius: 4px;
      margin-bottom: 8px;
    }

    .hook-wrap .ov-text h2 {
      font-family: 'Playfair Display', serif;
      font-size: 22px;
      line-height: 1.3;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
    }

    .hook-wrap .ov-text p {
      font-size: 13px;
      opacity: 0.85;
      margin-top: 5px;
      line-height: 1.5;
    }

    /* ‚îÄ‚îÄ TEXTOS E T√çTULOS ‚îÄ‚îÄ */
    .step-label {
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--brand-rose);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .question {
      font-family: 'Playfair Display', serif;
      font-size: 22px;
      line-height: 1.35;
      color: var(--text);
      margin-bottom: 8px;
    }

    .sub {
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 24px;
      line-height: 1.6;
    }

    /* ‚îÄ‚îÄ BOT√ïES DE OP√á√ÉO ‚îÄ‚îÄ */
    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .option {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px 18px;
      border: 1.5px solid rgba(200, 68, 90, 0.12);
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      background: var(--white);
      font-size: 15px;
      color: var(--text);
      text-align: left;
      font-family: 'DM Sans', sans-serif;
      width: 100%;
    }

    .option:hover {
      border-color: var(--brand-rose-light);
      background: rgba(200, 68, 90, 0.02);
      transform: translateX(4px);
    }

    .option.selected {
      border-color: var(--check);
      background: rgba(46, 204, 113, 0.05);
      font-weight: 500;
    }

    .opt-icon {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: rgba(200, 68, 90, 0.08);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: var(--brand-rose);
      font-weight: 800;
      flex-shrink: 0;
    }

    .option.selected .opt-icon {
      background: var(--check);
      color: white;
    }

    /* ‚îÄ‚îÄ OP√á√ïES COM IMAGEM (GRID) ‚îÄ‚îÄ */
    .options-img {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .opt-img {
      border: 2px solid rgba(200, 68, 90, 0.12);
      border-radius: 20px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.25s;
      background: #fdf6f0;
      position: relative;
    }

    .opt-img:hover {
      border-color: var(--brand-rose-light);
      transform: translateY(-4px);
    }

    .opt-img.selected {
      border-color: var(--check);
    }

    .opt-img-wrap {
      width: 100%;
      height: 110px;
      position: relative;
      background: #eee;
    }

    .opt-img-ph {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      background: linear-gradient(135deg, #fcebed, #f5d6da);
    }

    .opt-img-lbl {
      padding: 12px;
      font-size: 13px;
      font-weight: 600;
      text-align: center;
      background: white;
      min-height: 54px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .opt-img.selected .opt-img-lbl {
      background: var(--check);
      color: white;
    }

    /* ‚îÄ‚îÄ EMOJI CARDS (Q10, Q12) ‚îÄ‚îÄ */
    .emoji-cards {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .e-card {
      border: 2px solid rgba(200, 68, 90, 0.12);
      border-radius: 20px;
      padding: 20px 16px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      background: white;
    }

    .e-card:hover {
      border-color: var(--brand-rose-light);
      transform: translateY(-3px);
    }

    .e-card.selected {
      border-color: var(--check);
      background: rgba(46, 204, 113, 0.05);
    }

    .e-emoji {
      font-size: 36px;
      display: block;
      margin-bottom: 12px;
    }

    .e-txt {
      font-size: 14px;
      font-weight: 500;
      line-height: 1.4;
      color: var(--text);
    }

    /* ‚îÄ‚îÄ INSIGHT E MICRO-TRANSI√á√ïES ‚îÄ‚îÄ */
    .insight-card,
    .mt-card {
      text-align: center;
      padding: 40px 24px;
      animation: fadeIn 0.5s ease-out;
    }

    .analysis-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--insight-bg);
      color: var(--insight-title);
      padding: 10px 18px;
      border-radius: 99px;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-bottom: 24px;
      border: 1px solid var(--insight-border);
    }

    .insight-title {
      font-family: 'Playfair Display', serif;
      font-size: 26px;
      color: var(--text);
      margin-bottom: 16px;
    }

    .insight-text {
      font-size: 16px;
      line-height: 1.8;
      color: var(--insight-text);
      margin-bottom: 30px;
    }

    .insight-icon {
      font-size: 44px;
      margin-bottom: 20px;
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    /* ‚îÄ‚îÄ FORMUL√ÅRIOS ‚îÄ‚îÄ */
    .input-group {
      margin-bottom: 16px;
      text-align: left;
    }

    .input-group label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: var(--brown);
      margin-bottom: 6px;
    }

    .input-group input {
      width: 100%;
      padding: 16px;
      border: 1.5px solid rgba(200, 68, 90, 0.15);
      border-radius: 12px;
      font-size: 16px;
      font-family: inherit;
      transition: all 0.2s;
      background: var(--cream);
    }

    .input-group input:focus {
      outline: none;
      border-color: var(--brand-rose);
      background: white;
      box-shadow: 0 0 0 4px rgba(200, 68, 90, 0.1);
    }

    .btn-next {
      width: 100%;
      padding: 18px;
      background: linear-gradient(135deg, var(--cta), var(--cta-dark));
      color: white;
      border: none;
      border-radius: 16px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      margin-top: 16px;
      transition: all 0.3s;
      box-shadow: 0 6px 20px var(--cta-glow);
    }

    .btn-next:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px var(--cta-glow);
    }

    .btn-next:disabled {
      opacity: 0.3;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .btn-back {
      background: none;
      border: none;
      color: var(--muted);
      padding: 12px;
      font-size: 14px;
      cursor: pointer;
      margin-top: 10px;
      width: 100%;
      font-weight: 500;
    }

    .btn-back:hover {
      color: var(--brand-rose);
    }

    /* ‚îÄ‚îÄ LOADING ‚îÄ‚îÄ */
    .loading-screen {
      text-align: center;
      padding: 48px 24px;
    }

    .loader-ring {
      width: 56px;
      height: 56px;
      border: 3px solid rgba(200, 68, 90, 0.1);
      border-top-color: var(--brand-rose);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 0 auto 24px;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .loading-steps {
      margin-top: 32px;
      text-align: left;
      max-width: 280px;
      margin-left: auto;
      margin-right: auto;
    }

    .load-step {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 14px;
      color: var(--muted);
      padding: 8px 0;
    }

    .load-step.active {
      color: var(--brand-rose);
      font-weight: 600;
    }

    .load-step.done {
      color: var(--check);
    }

    .load-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: currentColor;
      flex-shrink: 0;
    }

    /* ‚îÄ‚îÄ RESULTADO ‚îÄ‚îÄ */
    .timer-wrap {
      background: #1f1411;
      color: white;
      padding: 14px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-bottom: 20px;
    }

    .timer {
      font-family: monospace;
      font-size: 20px;
      font-weight: 700;
      color: #ff4d4d;
    }

    .result-intro {
      padding: 32px 24px 24px;
      text-align: center;
    }

    .result-intro h2 {
      font-family: 'Playfair Display', serif;
      font-size: 26px;
      line-height: 1.3;
      margin-bottom: 12px;
    }

    .profile-box {
      background: linear-gradient(135deg, #fff7f8, #fdf1f3);
      border-radius: 20px;
      padding: 24px;
      margin-bottom: 24px;
      border-left: 5px solid var(--brand-rose);
    }

    .profile-box h3 {
      font-family: 'Playfair Display', serif;
      font-size: 18px;
      margin-bottom: 16px;
      color: var(--brand-rose-dark);
    }

    .profile-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 12px;
      font-size: 14.5px;
      line-height: 1.5;
    }

    .profile-item span {
      color: var(--brand-gold);
      flex-shrink: 0;
      font-weight: bold;
    }

    .satisfaction {
      text-align: center;
      font-size: 12px;
      color: var(--muted);
      margin-top: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    @media (max-width: 500px) {
      body {
        background: var(--white);
        /* No celular, o fundo √© branco para ser expansivo */
      }

      body::before {
        display: none;
        /* Remove gradiente para ficar limpo */
      }

      .container {
        padding: 0;
        /* Remove padding lateral no container */
        max-width: 100%;
      }

      .header {
        padding: 4px 0 2px;
      }

      .progress-wrap {
        padding: 4px 15px 0;
      }

      .card {
        margin: 0;
        /* Sem margem para ocupar a largura toda */
        border-radius: 0;
        /* Bordas retas como um App */
        box-shadow: none;
        /* Sem sombra externa no mobile */
        border: none;
      }

      .card-body {
        padding: 24px 20px 40px;
        /* Padding generoso */
      }

      .hook-hero {
        height: 320px;
      }

      .progress-info {
        display: flex;
        justify-content: space-between;
        gap: 15px;
        /* Adicionado para evitar que os n√∫meros grudem no celular */
      }

      .hook-mid {
        height: 280px;
      }

      .hook-result {
        height: 300px;
      }

      .hook-wrap .ov-text {
        padding: 20px;
      }

      .hook-wrap .ov-text h2 {
        font-size: 21px;
      }

      .question {
        font-size: 18px;
        /* T√≠tulo menor para salvar espa√ßo */
        line-height: 1.3;
      }

      .sub {
        font-size: 14px;
        line-height: 1.5;
        margin-bottom: 12px;
        /* Reduzido de 24px para economizar espa√ßo */
      }

      .option {
        padding: 16px;
        font-size: 15px;
        border-radius: 14px;
        margin-bottom: 2px;
      }

      .opt-icon {
        width: 26px;
        height: 26px;
      }

      .options-img {
        grid-template-columns: 1fr 1fr;
        /* Volta para 2 colunas para caber na tela */
        gap: 10px;
      }

      .opt-img-wrap {
        height: 125px;
        /* Aumentado um pouco como solicitado */
      }

      .opt-img-ph {
        font-size: 24px;
      }

      .opt-img-lbl {
        font-size: 13px;
        min-height: 44px;
        padding: 6px;
      }

      .emoji-cards {
        gap: 10px;
      }

      .e-card {
        padding: 20px 10px;
      }

      .e-emoji {
        font-size: 32px;
      }

      .btn-next {
        padding: 18px;
        font-size: 16px;
        border-radius: 12px;
        margin-top: 10px;
      }

      .insight-title {
        font-size: 22px;
        margin-top: 10px;
      }

      .insight-text {
        font-size: 15px;
        line-height: 1.7;
      }

      .profile-box {
        padding: 20px;
        margin-top: 10px;
      }

      .result-intro h2 {
        font-size: 22px;
      }

      .timer-wrap {
        padding: 12px;
        font-size: 14px;
      }
    }
  </style>
</head>

<body>

  <div class="header">
    <div class="brand">‚ú¶ Radiant Guide</div>
  </div>

  <div class="progress-wrap" id="progressWrap" style="display:none">
    <div class="progress-info">
      <span id="progressLabel">Passo 1 de 20</span>
      <span id="progressPct">5%</span>
    </div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill" style="width:5%"></div>
    </div>
  </div>

  <div class="container">
    <div class="card" id="mainCard"></div>
  </div>

  <script>
    const IMG = {
      hero: 'capa.png?v=10',
      pain: 'mt3_pain.jpg?v=10',
      vision: 'res.jpg?v=10',
      result: 'res.jpg?v=10',
      food_a: 'f1.png?v=10',
      food_b: 'f2.png?v=10',
      food_c: 'f3.png?v=10',
      food_d: 'f4.png?v=10',
      age_18: 'img_18.jpg?v=10',
      age_30: 'img_30.jpg?v=10',
      age_40: 'img_40.jpg?v=10',
      age_50: 'img_50.jpg?v=10'
    };

    const steps = [
      { type: 'intro' },

      // Q1
      {
        type: 'q', id: 'age', icon: 'üå∏', step: 1, label: 'Sobre voc√™', imgOpts: true,
        q: 'Qual √© a sua faixa de idade?',
        sub: 'A biologia muda em cada fase da vida ‚Äî e o m√©todo precisa acompanhar isso.',
        opts: [
          { v: '18-29', t: '18 a 29 anos', e: 'üå∏', img: IMG.age_18 },
          { v: '30-39', t: '30 a 39 anos', e: 'üå∏', img: IMG.age_30 },
          { v: '40-49', t: '40 a 49 anos', e: 'üå∏', img: IMG.age_40 },
          { v: '50+', t: '50 anos ou mais', e: 'üå∏', img: IMG.age_50 }
        ],
        insight: (v) => {
          const map = {
            '18-29': { t: 'üß¨ Metabolismo ainda acelerado', b: 'Seu metabolismo √© naturalmente mais ativo agora ‚Äî mas h√°bitos ruins formados nessa fase se consolidam com o tempo. Agir cedo √© a maior vantagem que existe.' },
            '30-39': { t: 'üß¨ A virada metab√≥lica come√ßa aqui', b: 'Nessa fase o metabolismo desacelera em m√©dia 3‚Äì5% por ano. O cortisol do estresse bloqueia a queima. O que funcionava antes para de funcionar ‚Äî n√£o √© sua culpa, √© biologia.' },
            '40-49': { t: 'üß¨ Fase de transforma√ß√£o hormonal', b: 'A queda do estrog√™nio redireciona onde o corpo armazena gordura ‚Äî especialmente na barriga. Um plano gen√©rico falha aqui. Voc√™ precisa de uma abordagem espec√≠fica.' },
            '50+': { t: 'üß¨ O corpo responde, em qualquer fase', b: 'Mulheres acima dos 50 que usam o m√©todo certo surpreendem at√© a si mesmas. O corpo n√£o para de responder ‚Äî ele s√≥ precisa do est√≠mulo adaptado √† sua biologia.' }
          };
          return map[v];
        }
      },

      // MT1
      {
        type: 'mt', id: 'mt1', icon: 'üî¨',
        title: 'AN√ÅLISE METAB√ìLICA',
        text: '"Baseado na sua faixa et√°ria, identificamos o padr√£o hormonal mais prov√°vel do seu metabolismo. Agora precisamos confirmar com mais 2 perguntas para montar o diagn√≥stico correto."',
        cta: 'Continuar diagn√≥stico ‚Üí'
      },

      // Q2
      {
        type: 'q', id: 'history', icon: 'üí≠', step: 2, label: 'Seu hist√≥rico',
        q: 'Voc√™ j√° tentou emagrecer antes e n√£o conseguiu manter o resultado?',
        sub: 'Seja honesta. Essa resposta revela o padr√£o que precisa ser quebrado.',
        opts: [
          { v: 'loop', t: 'Sim ‚Äî j√° tentei e n√£o consegui manter' },
          { v: 'yo-yo', t: 'Emagreci, mas voltei ao peso depois' },
          { v: 'never', t: 'Nunca tentei de forma organizada' },
          { v: 'first', t: 'Estou tentando pela primeira vez' }
        ],
        insight: (v) => {
          if (v === 'never' || v === 'first') return { t: 'üí° Vantagem de quem come√ßa certo', b: 'Voc√™ n√£o tem padr√µes negativos para quebrar. Come√ßar com o m√©todo adequado desde o in√≠cio √© a maior vantagem poss√≠vel ‚Äî os resultados chegam mais r√°pido.' };
          return { t: 'üí° Voc√™ n√£o est√° sozinha', b: '9 em cada 10 mulheres que tentam emagrecer sem m√©todo adaptado entram no efeito sanfona. N√£o por falta de esfor√ßo ‚Äî mas porque a abordagem ignorou seu corpo.' };
        }
      },

      // Q3
      {
        type: 'q', id: 'weight_behavior', icon: '‚öñÔ∏è', step: 3, label: 'Seu metabolismo',
        q: 'Como o seu peso costuma se comportar?',
        sub: 'Isso revela o que est√° acontecendo dentro do seu corpo, muito al√©m da balan√ßa.',
        opts: [
          { v: 'hard', t: 'Dificuldade de perder peso, mesmo me esfor√ßando' },
          { v: 'yoyo', t: 'Perco peso, mas recupero muito r√°pido' },
          { v: 'easy', t: 'Ganho peso com facilidade e demoro muito para perder' },
          { v: 'plateau', t: 'Peso est√°vel, mas n√£o consigo secar gordura localizada' }
        ],
        insight: (v) => {
          const map = {
            'hard': { t: 'üî¨ Resist√™ncia √† Insulina', b: 'Quando o corpo resiste mesmo com esfor√ßo, a insulina costuma estar por tr√°s. Isso n√£o se resolve comendo menos ‚Äî se resolve com a combina√ß√£o certa de alimentos.' },
            'yoyo': { t: 'üî¨ Metabolismo Muscular em Risco', b: 'Perder e recuperar r√°pido indica que dietas anteriores destru√≠ram massa muscular. Sem m√∫sculo, o metabolismo fica lento e o peso volta f√°cil.' },
            'easy': { t: 'üî¨ Modo de Prote√ß√£o Ativado', b: 'Ganhar f√°cil e perder devagar √© sinal de que seu metabolismo desacelerou por ciclos de restri√ß√£o. Ele est√° se protegendo, n√£o te sabotando.' },
            'plateau': { t: 'üî¨ Gordura Hormonal Localizada', b: 'Peso est√°vel com gordura que n√£o sai √© o padr√£o mais comum ap√≥s os 30. O desequil√≠brio hormonal direciona a gordura para regi√µes espec√≠ficas.' }
          };
          return map[v];
        }
      },

      // MT2
      {
        type: 'mt', id: 'mt2', icon: '‚úÖ',
        title: 'PADR√ÉO IDENTIFICADO',
        text: '"Com base no que voc√™ respondeu, conseguimos mapear seu tipo metab√≥lico. Agora vamos entender o que est√° bloqueando seus resultados na pr√°tica."',
        cta: 'Continuar ‚Üí'
      },

      // Q4 (MULTI)
      {
        type: 'q', id: 'obstacles', icon: 'üöß', step: 4, label: 'O que te trava', multi: true,
        q: 'O que mais te impede de emagrecer hoje?',
        sub: 'Selecione tudo que √© real na sua vida agora.',
        opts: [
          { v: 'food', t: 'N√£o sei exatamente o que comer' },
          { v: 'time', t: 'Falta de tempo na rotina' },
          { v: 'energy', t: 'Cansa√ßo e falta de energia' },
          { v: 'ansxiety', t: 'Ansiedade e vontade de comer' },
          { v: 'failed', t: 'J√° tentei de tudo e nada funcionou' }
        ],
        insight: () => ({ t: 'üí° Esses s√£o dados, n√£o obst√°culos', b: 'Qualquer plano que ignore sua energia e seu tempo vai falhar. O seu plano precisa caber na sua vida real, n√£o em uma teoria perfeita.' })
      },

      // Q5
      {
        type: 'q', id: 'routine', icon: 'üóìÔ∏è', step: 5, label: 'Sua rotina real',
        q: 'Como √© a maior parte da sua semana?',
        sub: 'Sem filtro. A vida real ‚Äî n√£o a vers√£o que voc√™ gostaria que fosse.',
        opts: [
          { v: 'work_out', t: 'Trabalho fora o dia todo' },
          { v: 'home', t: 'Trabalho em casa (home office)' },
          { v: 'mom', t: 'Cuido da casa e dos filhos integral' },
          { v: 'both', t: 'Trabalho e ainda cuido de tudo em casa' }
        ],
        insight: (v) => {
          const map = {
            'work_out': { t: 'üóìÔ∏è Rotina fora de casa', b: 'Quem passa o dia fora precisa de um plano que funcione sem cozinha por perto. A flexibilidade √© mais importante do que a perfei√ß√£o aqui.' },
            'home': { t: 'üóìÔ∏è Mais acesso, mais tenta√ß√£o', b: 'Trabalhar em casa facilita o "beliscar" o dia todo. Seu plano precisa de estrutura de hor√°rios mais do que de restri√ß√£o.' },
            'mom': { t: 'üóìÔ∏è Voc√™ em √∫ltimo lugar', b: 'Quem cuida de todos tende a se colocar em √∫ltimo lugar. Seu plano precisa ser simples o suficiente para funcionar dentro do caos do dia.' },
            'both': { t: 'üóìÔ∏è A rotina mais exigente', b: 'Este √© o cen√°rio mais d√≠ficil. Qualquer plano complicado vai durar 3 dias. O seu precisa caber nos 15 minutos que sobram.' }
          };
          return map[v];
        }
      },

      // Q6
      {
        type: 'q', id: 'available_time', icon: '‚è±Ô∏è', step: 6, label: 'Seu tempo',
        q: 'Quanto tempo voc√™ consegue dedicar para voc√™ por dia?',
        sub: 'Seja realista ‚Äî o que realmente acontece na sua rotina.',
        opts: [
          { v: '15', t: 'At√© 15 minutos' },
          { v: '30', t: '20 a 30 minutos' },
          { v: '40', t: '40 minutos ou mais' },
          { v: 'varies', t: 'Varia muito, depende do dia' }
        ],
        insight: () => ({ t: '‚è±Ô∏è Voc√™ tem mais do que precisa', b: '20 minutos de atividade bem direcionada s√£o suficientes para queima consistente. O problema nunca foi o tempo, foi o m√©todo.' })
      },

      // Q7 (IMG)
      {
        type: 'q', id: 'food_relationship', icon: 'üçΩÔ∏è', step: 7, label: 'Sua alimenta√ß√£o', imgOpts: true,
        q: 'Como voc√™ descreveria sua rela√ß√£o com a comida hoje?',
        sub: 'Essa resposta explica por que o peso muitas vezes n√£o se move.',
        opts: [
          { v: 'all', t: 'Como de tudo, sem controle', e: 'üçî', img: 'f1.png?v=3' },
          { v: 'trying', t: 'Tento comer bem, mas escorrego', e: 'ü•ó', img: 'f2.png?v=3' },
          { v: 'restrict', t: 'Fa√ßo dietas restritivas e desisto', e: 'ü•©', img: 'f3.png?v=3' },
          { v: 'nothing', t: 'Cortei tudo e n√£o emagre√ßo', e: 'ü•¶', img: 'f4.png?v=3' }
        ],
        insight: (v) => {
          if (v === 'restrict') return { t: 'üçΩÔ∏è O ciclo da restri√ß√£o', b: 'Restri√ß√£o ‚Üí desequil√≠brio ‚Üí desist√™ncia. Esse ciclo se repete porque a dieta √© grande demais para a vida. Precisamos de sustentabilidade.' };
          if (v === 'nothing') return { t: 'üçΩÔ∏è O paradoxo da restri√ß√£o', b: 'Cortar demais faz o metabolismo "travar" para sobreviver. A solu√ß√£o n√£o √© comer menos, √© comer estrategicamente.' };
          return { t: 'üçΩÔ∏è Alimenta√ß√£o √© 70% do resultado', b: 'Se a alimenta√ß√£o n√£o est√° alinhada ao seu metabolismo, o resultado trava. N√£o √© sobre cortar tudo, √© sobre o que funciona para voc√™.' };
        }
      },

      // Q8 (MULTI)
      {
        type: 'q', id: 'restrictions', icon: '‚ö†Ô∏è', step: 8, label: 'Restri√ß√µes', multi: true,
        q: 'Voc√™ tem alguma restri√ß√£o ou intoler√¢ncia alimentar?',
        sub: 'Garante que seu plano n√£o incluir√° nada que te prejudique.',
        opts: [
          { v: 'lactose', t: 'Intoler√¢ncia √† lactose' },
          { v: 'gluten', t: 'Intoler√¢ncia ao gl√∫ten' },
          { v: 'eggs', t: 'Alergia a ovos' },
          { v: 'seafood', t: 'Alergia a frutos do mar' },
          { v: 'complex', t: 'Dificuldade com card√°pios elaborados' },
          { v: 'none', t: 'Nenhuma das anteriores' }
        ],
        insight: () => ({ t: '‚ö†Ô∏è Registrado. Plano adaptado.', b: 'Restri√ß√µes n√£o s√£o limita√ß√µes, s√£o especifica√ß√µes. Todo protocolo ser√° constru√≠do dentro do que funciona para voc√™.' })
      },

      // MT3 (EMOTIONAL)
      {
        type: 'mt', id: 'mt3', icon: 'üíî', hImage: IMG.pain,
        title: 'PARE POR UM MOMENTO.',
        tag: 'üíî A PERGUNTA QUE MUDA TUDO',
        text: 'Voc√™ nos contou sobre dados. Agora preciso te perguntar algo diferente. N√£o sobre o que voc√™ come hoje. Mas sobre como voc√™ se sente.',
        cta: 'Estou pronta ‚Üí'
      },

      // Q9
      {
        type: 'q', id: 'time_unsatisfied', icon: 'üíî', step: 9, label: 'Momento de virada',
        q: 'H√° quanto tempo voc√™ n√£o se sente bem com o seu pr√≥prio corpo?',
        sub: 'Responda com honestidade total. Essa resposta importa muito.',
        opts: [
          { v: '1y', t: 'H√° menos de 1 ano' },
          { v: '3y', t: 'Entre 1 e 3 anos' },
          { v: 'plus', t: 'Mais de 3 anos' },
          { v: 'never', t: 'Nunca me senti realmente bem' }
        ],
        insight: (v) => {
          const map = {
            '1y': { t: 'üí° Voc√™ chegou cedo', b: 'Quanto mais cedo se age, mais r√°pido √© reverter. O caminho √© mais curto do que voc√™ imagina.' },
            '3y': { t: 'üí° Tempo demais para esperar', b: 'Dois anos sem se reconhecer no espelho pesa. Voc√™ merece se sentir bem na sua pr√≥pria pele. Isso n√£o √© luxo.' },
            'plus': { t: 'üí° O corpo surpreende', b: 'Quando dura muito tempo, a mente duvida. Mas o hist√≥rico de transforma√ß√£o de quem espera tanto tempo √© o mais inspirador.' },
            'never': { t: 'üí° Novo ponto de partida', b: 'Nunca ter se sentido bem n√£o √© uma senten√ßa. √â o combust√≠vel para a mudan√ßa mais poderosa da sua vida.' }
          };
          return map[v];
        }
      },

      // Q10 (EMOJI CARDS)
      {
        type: 'q', id: 'motivation', icon: 'üî•', step: 10, label: 'Seu porqu√™', emojiCards: true,
        q: 'O que mais te move a querer essa mudan√ßa agora?',
        sub: 'Essa √© a √¢ncora do seu plano. Sem um porqu√™ real, qualquer m√©todo fraqueja.',
        opts: [
          { v: 'health', t: 'Sa√∫de e longevidade', e: 'üíó' },
          { v: 'self', t: 'Autoestima e confian√ßa', e: 'ü™û' },
          { v: 'clothes', t: 'Voltar a usar minhas roupas', e: 'üëó' },
          { v: 'event', t: 'Evento especial vindo a√≠', e: 'üéâ' },
          { v: 'done', t: 'N√£o aguento mais me sentir assim', e: 'üò§' }
        ],
        insight: (v) => {
          const map = {
            'health': { t: 'üî• O porqu√™ sustent√°vel', b: 'Quem muda por sa√∫de mant√©m resultados por anos. Essa motiva√ß√£o alimenta consist√™ncia mesmo em dias dif√≠ceis.' },
            'self': { t: 'üî• Autoestima √© o resultado real', b: 'O n√∫mero na balan√ßa some, a forma como voc√™ se sente fica. √â isso que transforma tudo.' },
            'clothes': { t: 'üî• Voltando a ser voc√™', b: 'Ter roupas que voc√™ ama guardadas √© uma dor constante. Recuperar sua identidade no guarda-roupa √© libertador.' },
            'event': { t: 'üî• Prazo cria foco', b: 'Eventos s√£o aceleradores. Com o m√©todo certo e data em mente, o corpo responde de forma surpreendente.' },
            'done': { t: 'üî• Essa raiva √© combust√≠vel', b: '"N√£o aguento mais" √© o ponto de virada mais forte. Quem chega nesse limite raramente para no meio.' }
          };
          return map[v];
        }
      },

      // Q11 (MULTI)
      {
        type: 'q', id: 'body_targets', icon: 'üéØ', step: 11, label: 'Seu foco', multi: true,
        q: 'Quais regi√µes do corpo mais te incomodam hoje?',
        sub: 'Seu plano vai trabalhar essas regi√µes de forma direcionada.',
        opts: [
          { v: 'belly', t: 'Barriga e flancos' },
          { v: 'arms', t: 'Bra√ßos' },
          { v: 'legs', t: 'Coxas e gl√∫teos' },
          { v: 'all', t: 'Corpo inteiro (reduzir tudo)' },
          { v: 'local', t: 'Gordura localizada' }
        ],
        insight: () => ({ t: 'üéØ Regi√µes registradas.', b: 'Gordura localizada tem causa hormonal ou circulat√≥ria. Vamos atacar a origem, n√£o s√≥ o sintoma.' })
      },

      // MT4
      {
        type: 'mt', id: 'mt4', icon: 'üåü', hImage: IMG.vision,
        title: 'EST√Å A UMA RESPOSTA DO DIAGN√ìSTICO.',
        tag: '‚ú® VISUALIZE AGORA',
        text: 'Imagine com detalhe ‚Äî como seria acordar diferente, se olhar e se sentir confiante de verdade?',
        cta: 'Estou imaginando ‚Üí'
      },

      // Q12 (EMOJI CARDS)
      {
        type: 'q', id: 'future_vision', icon: 'üåü', step: 12, label: 'Comprometimento', emojiCards: true,
        q: 'Como voc√™ se sentiria se em 30 dias visse uma diferen√ßa real?',
        sub: 'N√£o pense. Sinta. Essa resposta √© o seu combust√≠vel.',
        opts: [
          { v: 'relieved', t: 'Aliviada. Finalmente.', e: 'üòÆ‚Äçüí®' },
          { v: 'proud', t: 'Orgulhosa de mim mesma.', e: 'üí™' },
          { v: 'confident', t: 'Confiante e com energia.', e: '‚ú®' },
          { v: 'happy', t: 'Feliz de um jeito novo.', e: 'ü•π' }
        ],
        insight: () => ({ t: 'üåü Esse sentimento j√° te pertence.', b: 'Quem visualiza o objetivo com emo√ß√£o tem 2,4x mais chances de sucesso. Voc√™ est√° pronta.' })
      },

      // MT5
      {
        type: 'mt', id: 'mt5', icon: 'üìä',
        title: 'DIAGN√ìSTICO QUASE COMPLETO',
        text: 'Voc√™ deu o passo mais importante. Agora preciso de apenas 3 dados num√©ricos para calcular o caminho exato at√© esse resultado. Leva 20 segundos.',
        cta: 'Inserir meus dados ‚Üí'
      },

      // BIO
      {
        type: 'bio', id: 'bio', icon: 'üìä', label: 'Quase l√°',
        q: 'Agora vamos calcular seu plano.',
        sub: 'Esses dados definem a meta e o ritmo ideal para o seu corpo.'
      },

      // MT6 (LEAD CAPTURE)
      {
        type: 'email', id: 'email', icon: 'üìß',
        title: 'PARA ONDE ENVIAMOS SEU PLANO?',
        text: 'Informe seus dados abaixo para receber o diagn√≥stico completo e sua oferta exclusiva.'
      },

      { type: 'loading' },
      { type: 'result' },
    ];

    let cur = 0, ans = {}, multiAns = {}, showingInsight = false;
    const $ = id => document.getElementById(id);

    function getQSteps() { return steps.filter(s => ['q', 'bio', 'email', 'mt'].includes(s.type)); }

    function updateProgressBar() {
      const qSteps = getQSteps();
      const currentIdx = qSteps.findIndex(s => steps[cur].id === s.id);
      if (currentIdx === -1) return;

      const total = qSteps.length;
      const pct = Math.round(((currentIdx + 1) / total) * 100);
      $('progressFill').style.width = pct + '%';
      $('progressLabel').textContent = `Passo ${currentIdx + 1} de ${total}`;
      $('progressPct').textContent = pct + '%';
    }

    function render() {
      const s = steps[cur], card = $('mainCard'), pw = $('progressWrap');

      // Reset card content
      card.innerHTML = '';
      card.style.animation = 'none';
      void card.offsetWidth; // trigger reflow
      card.style.animation = null;

      if (s.type === 'intro') {
        pw.style.display = 'none';
        card.innerHTML = introHTML();
        injectImg(card.querySelector('.hook-wrap'), IMG.hero);
        return;
      }

      if (s.type === 'loading') {
        pw.style.display = 'none';
        card.innerHTML = loadingHTML();
        startLoading();
        return;
      }

      if (s.type === 'result') {
        pw.style.display = 'none';
        card.innerHTML = resultHTML();
        startTimer();
        injectImg(card.querySelector('.hook-wrap'), IMG.result);
        return;
      }

      if (showingInsight && s.insight) {
        pw.style.display = 'none';
        card.innerHTML = insightHTML(s);
        return;
      }

      pw.style.display = '';
      updateProgressBar();

      if (s.type === 'mt') {
        card.innerHTML = mtHTML(s);
        if (s.hImage) injectImg(card.querySelector('.hook-wrap'), s.hImage);
      } else if (s.type === 'bio') {
        card.innerHTML = bioHTML(s);
      } else if (s.type === 'email') {
        card.innerHTML = emailHTML(s);
      } else {
        card.innerHTML = questionHTML(s);
        if (s.imgOpts) s.opts.forEach((o, idx) => injectOptImg(o, idx));
      }
    }

    function injectImg(wrap, src) {
      if (!wrap) return;
      const img = new Image();
      img.onload = () => img.classList.add('loaded');
      img.src = src;
      wrap.prepend(img);
    }

    function injectOptImg(o, idx) {
      const ph = $('ph_' + idx);
      const wrap = $('oi_' + idx);
      if (!ph || !wrap) return;
      const img = new Image();
      img.style.cssText = 'width:100%;height:100%;object-fit:cover;object-position:top center;display:block;opacity:0;transition:opacity 0.4s;position:absolute;inset:0;';
      img.onload = () => {
        img.style.opacity = '1';
        ph.style.opacity = '0';
      };
      img.src = o.img;
      wrap.prepend(img);
    }

    /* TEMPLATES */
    function introHTML() {
      return `
        <div class="hook-wrap hook-hero">
          <div class="ov"></div>
          <div class="ov-text">
            <span class="tag">‚ú¶ Diagn√≥stico Personalizado</span>
            <h2>"Seu corpo n√£o est√° resistindo a voc√™."</h2>
            <p>Ele est√° apenas respondendo ao m√©todo errado.</p>
          </div>
        </div>
        <div class="card-body" style="text-align:center">
          <h1 style="font-family:'Playfair Display';font-size:24px;margin-bottom:12px">Descubra por que voc√™ n√£o emagrece ‚Äî mesmo quando se esfor√ßa.</h1>
          <p style="color:var(--muted);font-size:15px;line-height:1.6;margin-bottom:20px">Este diagn√≥stico de 4 minutos analisa seu metabolismo e rotina para montar o √∫nico plano que funciona para o seu corpo.</p>
          <div style="display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:20px;font-size:13px;color:var(--brand-rose);font-weight:700">
            <span style="display:flex;color:#e6b800">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
            <span>üî¥ 23.847 diagn√≥sticos este m√™s</span>
          </div>
          <button class="btn-next" onclick="next()">Iniciar meu diagn√≥stico gratuito ‚Üí</button>
        </div>`;
    }

    function mtHTML(s) {
      const hook = s.hImage ? `<div class="hook-wrap hook-mid"><div class="ov"></div><div class="ov-text"><span class="tag">${s.tag}</span><h2>${s.title}</h2></div></div>` : '';
      return `${hook}
        <div class="card-body mt-card">
          ${!s.hImage ? `<span class="insight-icon">${s.icon}</span><h2 class="insight-title">${s.title}</h2>` : ''}
          <p class="insight-text">${s.text}</p>
          <button class="btn-next" onclick="next()">${s.cta}</button>
          <button class="btn-back" onclick="prev()">‚Üê Pergunta anterior</button>
        </div>`;
    }

    function questionHTML(s) {
      const isM = s.multi, k = s.id, curAn = ans[k], curMu = multiAns[k] || [];
      const back = `<button class="btn-back" onclick="prev()">‚Üê Volta</button>`;
      let opts = '';

      if (s.imgOpts) {
        opts = `<div class="options-img">${s.opts.map((o, idx) => `
          <div class="opt-img ${curAn === o.v ? 'selected' : ''}" onclick="selS('${k}','${o.v}')">
            <div class="opt-img-wrap" id="oi_${idx}"><div class="opt-img-ph" id="ph_${idx}">${o.e}</div></div>
            <div class="opt-img-lbl">${o.t}</div>
          </div>`).join('')}</div>`;
      } else if (s.emojiCards) {
        opts = `<div class="emoji-cards">${s.opts.map(o => `
          <div class="e-card ${curAn === o.v ? 'selected' : ''}" onclick="selS('${k}','${o.v}')">
            <span class="e-emoji">${o.e}</span><div class="e-txt">${o.t}</div>
          </div>`).join('')}</div>`;
      } else {
        const L = ['A', 'B', 'C', 'D', 'E', 'F'];
        opts = `<div class="options">${s.opts.map((o, i) => `
          <button class="option ${isM ? (curMu.includes(o.v) ? 'selected' : '') : (curAn === o.v ? 'selected' : '')}" 
            onclick="${isM ? `toggleM('${k}','${o.v}')` : `selS('${k}','${o.v}')`}">
            <span class="opt-icon">${L[i]}</span>${o.t}
          </button>`).join('')}</div>`;
      }

      return `<div class="card-body">
        <div class="step-label">${s.icon} ${s.label}</div>
        <div class="question">${s.q}</div>
        <p class="sub">${s.sub}</p>
        ${isM ? '<p style="font-size:12px;color:var(--muted);margin-bottom:12px;font-style:italic">Selecione todas que se aplicam</p>' : ''}
        ${opts}
        ${isM ? `<button class="btn-next" onclick="next()" ${curMu.length === 0 ? 'disabled' : ''}>Continuar ‚Üí</button>` : ''}
        ${back}
      </div>`;
    }

    function insightHTML(s) {
      const val = s.multi ? multiAns[s.id] : ans[s.id];
      const ins = s.insight(val);
      return `<div class="card-body insight-card">
        <span class="insight-icon">üî¨</span>
        <div class="analysis-badge">An√°lise Personalizada</div>
        <h2 class="insight-title">${ins.t}</h2>
        <div style="width:40px;height:2px;background:var(--brand-gold);margin:16px auto;opacity:0.3"></div>
        <p class="insight-text">${ins.b}</p>
        <button class="btn-next" onclick="confirmInsight()">Confirmar e continuar ‚Üí</button>
      </div>`;
    }

    function bioHTML(s) {
      return `<div class="card-body">
        <div class="step-label">${s.icon} ${s.label}</div>
        <div class="question">${s.q}</div>
        <p class="sub">${s.sub}</p>
        <div class="input-group"><label>Altura (cm)</label><input type="number" id="bh" placeholder="Ex: 165" oninput="chkBio()"></div>
        <div class="input-group"><label>Peso Atual (kg)</label><input type="number" id="bw" placeholder="Ex: 78" oninput="chkBio()"></div>
        <div class="input-group"><label>Peso Objetivo (kg)</label><input type="number" id="bt" placeholder="Ex: 62" oninput="chkBio()"></div>
        <button class="btn-next" id="bioNext" onclick="next()" disabled>Continuar ‚Üí</button>
      </div>`;
    }

    function emailHTML(s) {
      return `<div class="card-body" style="text-align:center">
        <span class="insight-icon">üìß</span>
        <h2 class="insight-title">${s.title}</h2>
        <p class="insight-text">${s.text}</p>
        <div class="input-group"><label>Seu primeiro nome</label><input type="text" id="ln" placeholder="Seu nome" oninput="chkEmail()"></div>
        <div class="input-group"><label>Seu melhor e-mail</label><input type="email" id="le" placeholder="email@exemplo.com" oninput="chkEmail()"></div>
        <button class="btn-next" id="emailNext" onclick="next()" disabled>Processar meu diagn√≥stico ‚Üí</button>
        <p style="font-size:11px;color:var(--muted);margin-top:12px">üîí Seus dados est√£o seguros. Sem spam.</p>
      </div>`;
    }

    function loadingHTML() {
      return `<div class="card-body loading-screen">
        <div class="loader-ring"></div>
        <h3 style="font-family:'Playfair Display';font-size:22px">Processando seu diagn√≥stico...</h3>
        <div class="loading-steps">
          <div class="load-step" id="ls1"><div class="load-dot"></div>Analisando tipo metab√≥lico</div>
          <div class="load-step" id="ls2"><div class="load-dot"></div>Mapeando obst√°culos da rotina</div>
          <div class="load-step" id="ls3"><div class="load-dot"></div>Identificando padr√£o alimentar</div>
          <div class="load-step" id="ls4"><div class="load-dot"></div>Calculando meta personalizada</div>
          <div class="load-step" id="ls5"><div class="load-dot"></div>Montando protocolo exclusivo</div>
        </div>
      </div>`;
    }

    function resultHTML() {
      const diff = Math.abs((ans.weight || 0) - (ans.goal || 0)) || 5;
      return `
        <div class="hook-wrap hook-result">
          <img src="${IMG.result}" class="loaded" style="opacity:1">
          <div class="ov"></div>
          <div class="ov-text">
            <span class="tag">‚ú¶ Diagn√≥stico Conclu√≠do</span>
            <h2>Sua transforma√ß√£o come√ßa agora.</h2>
          </div>
        </div>
        <div class="result-intro">
          <div class="timer-wrap">‚ö° Oferta expira em: <span class="timer" id="timer">14:59</span></div>
          <h2>Temos o caminho exato para voc√™ chegar aos ${ans.goal || 'sua meta'}kg</h2>
          <p style="font-size:14px;color:var(--muted)">Baseado no seu perfil de ${ans.age || ''} anos e seus objetivos espec√≠ficos.</p>
        </div>
        <div class="card-body" style="padding-top:0">
          <div class="profile-box">
            <h3>üìã Seu Diagn√≥stico</h3>
            <div class="profile-item"><span>‚ú¶</span> Metabolismo que precisa de ativa√ß√£o, n√£o restri√ß√£o.</div>
            <div class="profile-item"><span>‚ú¶</span> Plano adaptado para quem tem ${ans.available_time || 'pouco'} tempo.</div>
            <div class="profile-item"><span>‚ú¶</span> Foco inicial em: ${multiAns.body_targets ? multiAns.body_targets.map(t => t).join(', ') : 'corpo inteiro'}.</div>
            <div class="profile-item"><span>‚ú¶</span> Meta real: <strong>Eliminar ${diff}kg</strong> e recuperar sua autoestima.</div>
          </div>
          <p style="text-align:center;font-size:14px;margin-bottom:20px">Mulheres com o seu perfil perderam em m√©dia 3,8kg nas primeiras 4 semanas seguindo este m√©todo.</p>
          <button class="btn-next" onclick="alert('Redirecionar para Checkout')">Quero meu plano agora ‚Üí</button>
          <div class="satisfaction">üîí Garantia de 7 dias ¬∑ Pagamento Seguro</div>
        </div>`;
    }

    /* LOGIC */
    function selS(k, v) {
      ans[k] = v;
      if (steps[cur].insight) { showingInsight = true; render(); }
      else next();
    }
    function toggleM(k, v) {
      if (!multiAns[k]) multiAns[k] = [];
      const a = multiAns[k], i = a.indexOf(v);
      if (i > -1) a.splice(i, 1); else a.push(v);
      render();
    }
    function confirmInsight() { showingInsight = false; next(); }

    function next() {
      cur++; if (cur >= steps.length) return;
      render(); window.scrollTo(0, 0);
    }
    function prev() {
      if (showingInsight) { showingInsight = false; render(); return; }
      if (cur > 0) { cur--; render(); window.scrollTo(0, 0); }
    }

    function chkBio() {
      const h = $('bh').value, w = $('bw').value, t = $('bt').value;
      ans.height = h; ans.weight = w; ans.goal = t;
      $('bioNext').disabled = !(h && w && t);
    }
    function chkEmail() {
      const n = $('ln').value, e = $('le').value;
      ans.name = n; ans.email = e;
      $('emailNext').disabled = !(n && e.includes('@'));
    }

    function startLoading() {
      const ids = ['ls1', 'ls2', 'ls3', 'ls4', 'ls5']; let i = 0;
      const iv = setInterval(() => {
        if (i > 0) { $(ids[i - 1]).classList.remove('active'); $(ids[i - 1]).classList.add('done'); }
        if (i < ids.length) { $(ids[i]).classList.add('active'); i++; }
        else { clearInterval(iv); setTimeout(next, 600); }
      }, 800);
    }

    function startTimer() {
      let time = 15 * 60;
      setInterval(() => {
        let m = Math.floor(time / 60), s = time % 60;
        const tEl = $('timer');
        if (tEl) tEl.textContent = `${m}:${s < 10 ? '0' + s : s}`;
        if (time > 0) time--;
      }, 1000);
    }

    render();
  </script>
</body>

</html>